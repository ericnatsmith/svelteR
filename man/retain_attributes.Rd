% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vectors.R
\name{retain_attributes}
\alias{retain_attributes}
\title{Retain Attributes in Merged Columns}
\usage{
retain_attributes(x)
}
\arguments{
\item{x}{A vector (usually a column in a data frame) that may have labelled attributes
(such as those created by the \code{haven} package).}
}
\value{
If \code{x} is labelled, the function returns the first element of \code{x}
with its attributes (e.g., variable label, value labels, and class) retained.
If \code{x} is not labelled, the function simply returns the first element of \code{x}.
}
\description{
This function ensures that when merging columns in data frames, attributes
such as variable labels and value labels (from labelled data) are retained
for the first element of the column.
}
\details{
The function checks whether the input vector \code{x} has labelled attributes (using \code{haven::is.labelled()}).
If it does, the function extracts and retains the original attributes, including the variable label
and value labels, and applies them to the first element of the vector.

This is useful when merging data where you want to preserve variable labels for specific columns
in the resulting data frame.
}
\examples{
\dontrun{
# Example using labelled data from the haven package and pivot_wider
library(haven)
library(tidyr)

# Create a labelled data frame
df <- data.frame(
  id = c(1, 1, 2, 2),
  time = c("pre", "post", "pre", "post"),
  score = labelled(c(10, 12, 9, 11), labels = c(Low = 9, High = 12), label = "Score")
)

# Use pivot_wider to reshape data and retain attributes in merged columns
df_wide <- pivot_wider(df, names_from = time, values_from = score, 
                       values_fn = retain_attributes)

# Check the attributes of the reshaped data
attributes(df_wide$post)
}
}
